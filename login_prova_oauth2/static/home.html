<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <title>Home</title>
</head>
<body>
  <h1>Benvenuto!</h1>
  <div id="user-info"></div>
  <button id="logoutBtn">Logout</button>

  <script>
    async function loadUser() {
    try {
        const res = await fetch("/auth/me", { credentials: "include" });
        if (!res.ok) throw new Error("Non loggato");
        const user = await res.json();
        document.getElementById("user-info").innerText = `Benvenuto, ${user.name} (${user.email})`;
    } catch (e) {
        // Torna alla login se il token non Ã¨ valido
        window.location.href = "/static/login.html";
    }
}

loadUser();
    
   
  </script>
</body>
</html>