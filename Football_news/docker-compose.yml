services:

  rss-feed-service:
    build: ./RSS_News/news_rss
    container_name: rss_feed_container
    ports:
      - "8002:8000" 
    volumes:
      - ./RSS_News/news_rss:/app 
  
  aggregator-service:
    build: ./RSS_News/news_aggregator
    container_name: news_aggregator_container
    ports:
      - "8003:8000" 
    volumes:
      - ./RSS_News/news_aggregator:/app 
    environment:
      - RSS_URL=http://rss-feed-service:8000
    depends_on:
      - rss-feed-service

  html-scrape-service:
    build: ./HTML_News/news_html
    container_name: html_scraper_container
    ports:
      - "8004:8000" 
    volumes:
      - ./HTML_News/news_html:/app 
  
  html-aggregator-service:
    build: ./HTML_News/html_extraction
    container_name: html_aggregator_container
    ports:
      - "8006:8000" 
    volumes:
      - ./HTML_News/html_extraction:/app 
    environment:
      - SCRAPE_URL=http://html-scrape-service:8000
    depends_on:
      - html-scrape-service
  
  news-service:
    build: .
    container_name: news_container
    ports:
      - "8005:8000" 
    volumes:
      - .:/app 
    environment:
      - RSS_URL=http://rss-feed-service:8000
      - AGG_URL=http://aggregator-service:8000
      - SCRAPE_URL=http://html-scrape-service:8000
      - HTML_URL=http://html-aggregator-service:8000
      - TOKEN_URL=http://auth-service:8000 
    depends_on:
      - rss-feed-service
      - aggregator-service
      - html-scrape-service
      - html-aggregator-service
